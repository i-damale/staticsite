// Script: typewriter, particles, clouds, day scene, toggle, github fetch
(function(){/* typewriter */ const el=document.getElementById('typewriter'); if(el){ const raw=JSON.parse(el.getAttribute('data-text')); let idx=0,ch=0,forward=true; const interval=78; function step(){ const cur=raw[idx]; if(forward){ ch++; if(ch>cur.length){ forward=false; setTimeout(step,1200); return; } } else { ch--; if(ch===0){ forward=true; idx=(idx+1)%raw.length; } } const slice=cur.slice(0,ch); let out=''; if(idx===0){ let used=false; for(let i=0;i<slice.length;i++){ const c=slice[i]; if(c==='X'&& !used){ out+='<span class="neon-pink">X</span>'; used=true; } else out+=c; } } else if(idx===2){ const parts=raw[2].split('|'); const left=parts[0], right=parts[1]||''; if(ch<=left.length) out=left.slice(0,ch); else out='<span class="neon-orange">'+left+'</span>'+right.slice(0,ch-left.length); } else out=slice; el.innerHTML=out; setTimeout(step,interval);} step(); }
 /* particles */ (function(){ const c=document.getElementById('particle-canvas'); if(!c) return; const ctx=c.getContext('2d'); function r(){c.width=innerWidth;c.height=innerHeight;} r(); addEventListener('resize',r); const colorsDark=['#00fff0','#8b00ff','#66fcf1','#b9a0ff']; const colorsLight=['#003f2f','#1a237e','#0b3b6f','#274e13']; let colors=colorsDark; const mouse={x:-9999,y:-9999}; addEventListener('mousemove',e=>{mouse.x=e.clientX;mouse.y=e.clientY}); addEventListener('mouseleave',()=>{mouse.x=-9999;mouse.y=-9999}); const parts=[]; for(let i=0;i<220;i++){ const sc=Math.random(); let r= sc<0.6? (Math.random()*1.2+0.4): sc<0.92? (Math.random()*2.4+1.2): (Math.random()*4.4+3.0); parts.push({x:Math.random()*c.width,y:Math.random()*c.height,r:r,vx:(Math.random()-0.5)*0.4,vy:(Math.random()-0.5)*0.4,col:colors[Math.floor(Math.random()*colors.length)],baseR:r}); } function draw(){ ctx.clearRect(0,0,c.width,c.height); for(let p of parts){ const dx=p.x-mouse.x, dy=p.y-mouse.y, dist=Math.sqrt(dx*dx+dy*dy); if(mouse.x>-9999 && dist<160){ const force=(160-dist)/160, angle=Math.atan2(dy,dx); p.vx+=Math.cos(angle)*(0.9*force); p.vy+=Math.sin(angle)*(0.9*force); } else { p.vx += (Math.random()-0.5)*0.01; p.vy += (Math.random()-0.5)*0.01; } p.vx*=0.985; p.vy*=0.985; p.x+=p.vx; p.y+=p.vy; if(p.x<-40) p.x=c.width+40; if(p.x>c.width+40) p.x=-40; if(p.y<-40) p.y=c.height+40; if(p.y>c.height+40) p.y=-40; const tw=0.9+0.4*Math.sin((Date.now()/900)+p.baseR); ctx.beginPath(); ctx.fillStyle=p.col; ctx.globalAlpha=0.95*tw; ctx.arc(p.x,p.y,p.r*tw,0,Math.PI*2); ctx.fill(); ctx.beginPath(); ctx.globalAlpha=0.05*tw; ctx.fillStyle=p.col; ctx.arc(p.x,p.y,(p.r*8)*tw,0,Math.PI*2); ctx.fill(); ctx.globalAlpha=1; } for(let a=0;a<parts.length;a++){ for(let b=a+1;b<parts.length;b++){ const pa=parts[a], pb=parts[b]; const dx=pa.x-pb.x, dy=pa.y-pb.y, d=Math.sqrt(dx*dx+dy*dy); if(d<90){ ctx.beginPath(); ctx.strokeStyle='rgba(160,255,230,'+(0.05*(1-d/90))+')'; ctx.lineWidth=0.5; ctx.moveTo(pa.x,pa.y); ctx.lineTo(pb.x,pb.y); ctx.stroke(); } } } requestAnimationFrame(draw);} draw(); window.__setParticleMode=(mode)=>{ colors = mode==='day'? ['#003f2f','#1a237e','#0b3b6f','#274e13']: colorsDark; parts.forEach(p=>p.col=colors[Math.floor(Math.random()*colors.length)]); }; })();
 /* clouds simple: ensure visible */ (function(){ const layer=document.getElementById('cloud-layer'); if(!layer) return; layer.style.zIndex='75'; function makeCloud(l,t,s,o,dir){ const el=document.createElement('div'); el.className='cloud'; el.style.left=l+'%'; el.style.top=t+'%'; el.style.width=s+'px'; el.style.height=(s*0.5)+'px'; el.style.opacity=o; layer.appendChild(el); const distance=120+Math.random()*220; const dur=60000+Math.random()*90000; const from=dir==='left'?0:-distance; const to=dir==='left'?-distance:0; el.animate([{transform:'translateX('+from+'px)'},{transform:'translateX('+to+'px)'}],{duration:dur,iterations:Infinity}); return el;} makeCloud(5,12,900,0.22,'left'); makeCloud(85,8,700,0.2,'right'); makeCloud(45,20,600,0.18,'left'); })();
 /* day scene simple draw */ (function(){ const c=document.getElementById('day-canvas'); if(!c) return; const ctx=c.getContext('2d'); function r(){ c.width=innerWidth; c.height=innerHeight;} r(); addEventListener('resize',r); let t=0; function draw(){ ctx.clearRect(0,0,c.width,c.height); if(!document.body.classList.contains('day-mode')){ requestAnimationFrame(draw); t++; return; } const w=c.width,h=c.height; const g=ctx.createLinearGradient(0,0,0,h*0.6); g.addColorStop(0,'#9fd9ff'); g.addColorStop(1,'#fff5e6'); ctx.fillStyle=g; ctx.fillRect(0,0,w,h*0.6); ctx.fillStyle='#8fcf7a'; ctx.beginPath(); ctx.ellipse(w*0.2,h*0.75,w*0.6,h*0.35,0,0,Math.PI*2); ctx.fill(); ctx.fillStyle='#7ac46a'; ctx.beginPath(); ctx.ellipse(w*0.7,h*0.78,w*0.5,h*0.28,0,0,Math.PI*2); ctx.fill(); ctx.fillStyle='#6fc8ff'; ctx.beginPath(); ctx.ellipse(w*0.5,h*0.85,w*0.25,h*0.06,0,0,Math.PI*2); ctx.fill(); ctx.fillStyle='#4caf50'; ctx.fillRect(0,h*0.88,w,h*0.12); for(let i=0;i<5;i++){ const bx=(t*0.3 + i*200)%(w+200)-100; const by=80 + (i%2)*20 + Math.sin((t+i*10)/60)*10; ctx.strokeStyle='#111'; ctx.lineWidth=2; ctx.beginPath(); ctx.moveTo(bx,by); ctx.quadraticCurveTo(bx+8,by-6,bx+16,by); ctx.quadraticCurveTo(bx+24,by-6,bx+32,by); ctx.stroke(); } const benchX=w*0.2, benchY=h*0.85; ctx.fillStyle='#8b5a2b'; ctx.fillRect(benchX,benchY-12,160,12); ctx.fillRect(benchX+10,benchY-40,16,40); ctx.fillRect(benchX+134,benchY-40,16,40); ctx.fillStyle='#263238'; ctx.beginPath(); ctx.arc(benchX+80,benchY-48,14,0,Math.PI*2); ctx.fill(); ctx.fillStyle='#455a64'; ctx.fillRect(benchX+68,benchY-40,24,30); ctx.fillStyle='#1b1f23'; ctx.fillRect(benchX+86,benchY-28,44,6); ctx.fillRect(benchX+96,benchY-48,28,20); ctx.fillStyle='#6b3e26'; ctx.fillRect(benchX+50,benchY-30,8,10); t++; requestAnimationFrame(draw);} draw(); })();
 /* theme toggle */ (function(){ const btn=document.getElementById('theme-toggle'); if(!btn) return; btn.addEventListener('click', ()=>{ const isDay = document.body.classList.toggle('day-mode'); btn.setAttribute('aria-pressed', isDay?'true':'false'); btn.textContent = isDay ? 'üåô' : '‚òÄÔ∏è'; if(window.__setParticleMode) window.__setParticleMode(isDay ? 'day' : 'dark'); }); })();
 /* github refresh */ (function(){ const btn=document.getElementById('refresh-repos'); const list=document.getElementById('projects-list'); const username='i-damale'; async function fetchRepos(){ btn.disabled=true; btn.textContent='üîÅ Refreshing...'; try{ const res = await fetch('https://api.github.com/users/'+username+'/repos?per_page=100'); if(!res.ok) throw new Error('GitHub API error '+res.status); const repos = await res.json(); repos.sort((a,b)=> new Date(b.pushed_at)-new Date(a.pushed_at)); list.innerHTML=''; repos.forEach(r=>{ const a=document.createElement('a'); a.className='card project-card'; a.href=r.html_url; a.target='_blank'; a.rel='noopener'; a.textContent = r.name + (r.description ? ' ‚Äî '+ r.description.slice(0,80) : ''); list.appendChild(a); }); btn.textContent='üîÅ Refreshed'; }catch(err){ console.error(err); btn.textContent='üîÅ Error'; }finally{ setTimeout(()=>{ btn.disabled=false; btn.textContent='üîÅ Refresh Projects'; },1200); } } btn.addEventListener('click', fetchRepos); })();